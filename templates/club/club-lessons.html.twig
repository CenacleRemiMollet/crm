{% extends 'dashboard.html.twig' %}


{% block stylesheets2 %}
	<link href="/assets/clubs/club.css" rel="stylesheet">
	<link href="/assets/showcase/showcase.css" rel="stylesheet">
	<link rel="stylesheet" href="/vendor/jquery-calendar/jquery-calendar.min.css">
	<link rel="stylesheet" href="/vendor/jquerysctipttop/jquerysctipttop.css" type="text/css">
{% endblock %}


{% block dashboardcontent %}

<br>
{% include ['club/' ~ club.uuid ~ '/lessons.html.twig', 'club/default-lessons.html.twig'] %}


{% endblock %}


{% block javascriptsafter1 %}
	<script src="/vendor/jquery-calendar/jquery-calendar.js"></script>
	{# https://www.jqueryscript.net/time-clock/Mobile-Friendly-Calendar-Schedule-Plugin.html #}
	{# https://www.jqueryscript.net/demo/Mobile-Friendly-Calendar-Schedule-Plugin/# #}
	<script src="/vendor/moment/moment-with-locales.min.js"></script>
	<script src="/vendor/jquery-touchswipe/jquery.touchSwipe.min.js"></script>
	<script src="/vendor/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js"></script>

	<script>
		$(document).ready(function(){
			moment.locale('fr');
			var now = moment();

			{% set orderDays = {'monday':0, 'tuesday':1, 'wednesday':2, 'thursday':3, 'friday':4, 'saturday':5, 'sunday':6} %}
			{% set daysDone = [] %}
			{% set minHour = 23 %}
			{% set maxHour = 0 %}
			var events = [
				{% for clubLesson in clubLessons %}
					{
						start: now.startOf('week').add({{ orderDays[clubLesson.day_of_week] }}, 'days').add({{ clubLesson.start_time|split(':')[0] }}, 'h').add({{ clubLesson.start_time|split(':')[1] }}, 'm').format('X'),
						end: now.startOf('week').add({{ orderDays[clubLesson.day_of_week] }}, 'days').add({{ clubLesson.end_time|split(':')[0] }}, 'h').add({{ clubLesson.end_time|split(':')[1] }}, 'm').format('X'),
						title: '{{ clubLesson.discipline }}',
						content: '<i>{{ clubLesson.age_level }}</i>',
						category: '{{ clubLesson.discipline }}'
					},
					{% set minHour = min(minHour, clubLesson.start_time|split(':')[0]) %}
					{% set maxHour = max(maxHour, clubLesson.end_time|split(':')[0]) %}
					{% if orderDays[clubLesson.day_of_week] not in daysDone %}
						{% set daysDone = daysDone|merge([orderDays[clubLesson.day_of_week]]) %}
					{% endif %}
				{% endfor %}
			];
			{% set minHour = minHour - 1 %}
			{% set maxHour = maxHour + 1 %}

			var activeDays = [{% for dayDone in daysDone %}{{ dayDone }},{% endfor %}];

      /**
       * A daynote
       */
      /*var daynotes = [
        {
          time: now.startOf('week').add(15, 'h').add(30, 'm').format('X'),
          title: 'Leo\'s holiday',
          content: 'yoo',
          category: 'holiday'
        }
      ];*/

			/**
			 * Init the calendar
			 */
			var calendar = $('#calendar').Calendar({
					locale: 'fr',
					weekday: {
						timeline: {
							intervalMinutes: 30,
							fromHour: {{ minHour}},
							toHour: {{ maxHour}},
							format: 'HH:mm'
						},
						dayline: {
							weekdays: activeDays,
							//weekdays: [0, 1, 2,3,4,5],
							format:'dddd'
						}
					},
					month: {
						format:'MMMM'
						
					},
					defaultView: {
						largeScreen:'week',
						smallScreen:'week',
						//smallScreenThreshold: 630
					}
				});
			calendar.setEventCategoriesColors([
				{category: "Taekwondo", color: "#337ab7"},
				{category: "Taekwonkido", color: "#f9a825"},
				{category: "Hapkido", color: "#558b2f"},
				{category: "Sinkido self-defense système", color: "#d84315"},
			]);
			calendar.setEvents(events);
			calendar.init();

			// remove month line
			$('.calendar-month').remove();
			// remove button for sliding
			$('.btn-move-calendar').remove();
			$('.weektoday').removeClass('weektoday');
			// disabled click on day column
			$('.calendar-day-header').css("pointer-events", "none");
		});

{#
	baby : 4-5 ans, blanches à pourpre
	child-6 : 6-9 ans
	child-10 : 10-12 ans, pourpres et plus ; 7-12 ans
	13 : 13 ans et plus, tous niveaux
	13-blue : 13 ans et plus, ceinture bleue minimum
	black-belt : ceinture noire
#}

		
  </script>


{% endblock %}


